{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/creance.schema.json",
    "title": "Créance",
    "description": "Une créance est un montant dû par un débiteur à un créancier",
    "type": "object",
    "properties": {
        "id" : {
            "title" : "Identifiant",
            "description" : "Identifiant de la créance",
            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/reference.schema.json"
        },
        "statut" : {
            "title" : "Statut",
            "description" : "Statut de la créance",            
            "enum" : [ "due", "impayeDefinitif"]
        },
        "debiteur" : {
            "title" : "Débiteur",
            "description" : "Le débiteur est une personne physique ou morale", 
            "required": ["type"],
            "oneOf": [
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personnePhysique.schema.json" },
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personneMorale.schema.json" }
            ]
        },
        "debiteurSecondaire" : {
            "title" : "Débiteur secondaire",
            "description" : "Le débiteur secondaire est le garant ou caution du débiteur principal", 
            "required": ["type"],
            "oneOf": [
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personnePhysique.schema.json" },
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personneMorale.schema.json" }
            ]
        },        
        "creancier" : {
            "title" : "Créancier",
            "description" : "Le créancier est une personne physique ou morale",             
            "required": ["type"],
            "oneOf" : [
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personnePhysique.schema.json" },
                { "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/personneMorale.schema.json" }
            ]
        },
        "montantDu" : {
            "title" : "Montant dû",
            "description" : "Total du montant dû : principal, intérêts et accessoires",  
            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/montantDu.schema.json"
        },
        "principal" : {
            "title" : "Principal",
            "description" : "Montant principal dû",  
            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/montantDu.schema.json"
        },
        "interets" : {
            "title" : "Intérêts",
            "description" : "Montant des intérêts dû",  
            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/montantDu.schema.json"
        },
        "accessoires" : {
            "title" : "Accessoires",
            "description" : "Montant des accessoires dû",  
            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/montantDu.schema.json"
        },
        "origine" : {
            "type" : "object",
            "title" : "Origine de la créance",
            "description" : "Plusieurs origines sont possibles : crédit...",
            "oneOf" : [
                {
                    "properties" : {
                        "credit" : {
                            "$ref": "https://raw.githubusercontent.com/Blitz-BS/cumfidio/main/json_schema/credit.schema.json"
                        }
                    }
                }
            ]
        }
    }
}